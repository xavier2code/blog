<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://xavier2code.site name=base><title>
            
                The Role of derive in Rust
            
        </title><meta content="The Role of derive in Rust" property=og:title><link href=https://xavier2code.site/favicon.png rel=icon type=image/png><link href=https://xavier2code.site/fonts.css rel=stylesheet><script async data-goatcounter=https://xavier2code.goatcounter.com/count src=https://xavier2code.site/js/count.js></script><noscript><img src="https://xavier2code.goatcounter.com//count?p=/posts/rust5/&t=The Role of derive in Rust"></noscript><script defer src=https://xavier2code.site/js/codeblock.js></script><script src=https://xavier2code.site/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://xavier2code.site/atom.xml rel=alternate title=xavier2code type=application/atom+xml><link href=https://xavier2code.site/theme/light.css rel=stylesheet><link href=https://xavier2code.site/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://xavier2code.site/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://xavier2code.site/main.css media=screen rel=stylesheet><script src="https://xavier2code.site/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=left-content></div><div class=content><nav><div class=left-nav><a href=https://xavier2code.site>xavier2code</a><div class=socials><a class=social href=https://mail.google.com/ rel=me> <img alt=email src=https://xavier2code.site/icons/social/email.svg> </a><a class=social href=https://github.com/xavier2code/ rel=me> <img alt=github src=https://xavier2code.site/icons/social/github.svg> </a><a class=social href=https://discord.com/ rel=me> <img alt=discord src=https://xavier2code.site/icons/social/discord.svg> </a><a class=social href=https://www.reddit.com/ rel=me> <img alt=reddit src=https://xavier2code.site/icons/social/reddit.svg> </a><a class=social href=https://x.com/ rel=me> <img alt=x-twitter src=https://xavier2code.site/icons/social/x-twitter.svg> </a></div></div><div class=right-nav><a href=https://xavier2code.site/posts style=margin-right:.5em>/posts</a><a href=https://xavier2code.site/projects style=margin-right:.5em>/projects</a><a href=https://xavier2code.site/archive style=margin-right:.5em>/archive</a><a href=https://xavier2code.site/about style=margin-right:.5em>/about</a><a href=https://xavier2code.site/tags style=margin-right:.5em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://xavier2code.site/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://xavier2code.site/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://xavier2code.site/icons/moon.svg> </a><script>updateItemToggleTheme()</script></div></nav><div data-selector="main article p" class=visible-element-observer-root><main><article><div class=title><div class=page-header>The Role of derive in Rust</div><div class=meta>Posted on <time>2025-02-08</time><span class=tags-label> :: </span><span class=tags> <a class=post-tag href=https://xavier2code.site/tags/documentation/>documentation</a> <a class=post-tag href=https://xavier2code.site/tags/rust/>rust</a> </span></div></div><section class=body><p>In Rust, the <code>derive</code> attribute is a powerful tool that allows the compiler to automatically generate implementations for certain traits. This feature significantly reduces the amount of boilerplate code developers need to write, making the development process more efficient and less error-prone.<h2 id=purpose-of-derive><a aria-label="Anchor link for: purpose-of-derive" class=zola-anchor href=#purpose-of-derive>Purpose of derive</a></h2><p>The primary purpose of the <code>derive</code> attribute is to automate the implementation of common traits for custom data types. This is particularly useful for traits that have straightforward, default implementations. By using <code>derive</code>, developers can focus on writing the core logic of their programs without getting bogged down in repetitive code.<h2 id=commonly-derivable-traits><a aria-label="Anchor link for: commonly-derivable-traits" class=zola-anchor href=#commonly-derivable-traits>Commonly Derivable Traits</a></h2><p>The following traits can be derived using the <code>#[derive]</code> attribute:<ul><li>Comparison Traits: <code>Eq</code>, <code>PartialEq</code>, <code>Ord</code>, <code>PartialOrd</code><li>Cloning and Copying: <code>Clone</code>, <code>Copy</code><li>Hashing: <code>Hash</code><li>Default Values: <code>Default</code><li>Debugging: <code>Debug</code></ul><h2 id=concrete-examples><a aria-label="Anchor link for: concrete-examples" class=zola-anchor href=#concrete-examples>Concrete Examples</a></h2><p><strong>Deriving <code>Debug</code></strong><p>The <code>Debug</code> trait is often used for debugging purposes. It allows you to print the internal state of a struct or enum using the {:?} formatter.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Debug)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>Point </span><span>{
</span><span>  x</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>  y</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>  </span><span style=color:#fa6e32>let</span><span> point </span><span style=color:#ed9366>=</span><span> Point { x</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>10</span><span style=color:#61676ccc>,</span><span> y</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>20 </span><span>}</span><span style=color:#61676ccc>;
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> point)</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// Output: Point { x: 10, y: 20 }
</span><span>}
</span></code></pre><p>In this example, the <code>#[derive(Debug)]</code> attribute automatically implements the Debug trait for the Point struct, allowing us to print its internal state.<p><strong>Deriving <code>Clone</code> and <code>Copy</code></strong><p>The Clone trait is used to create a deep copy of a value, while the Copy trait provides a shallow copy. These traits are particularly useful for types that need to be duplicated.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Copy)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>Point </span><span>{
</span><span>  x</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>  y</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>  </span><span style=color:#fa6e32>let</span><span> point1 </span><span style=color:#ed9366>=</span><span> Point { x</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>10</span><span style=color:#61676ccc>,</span><span> y</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>20 </span><span>}</span><span style=color:#61676ccc>;
</span><span>  </span><span style=color:#fa6e32>let</span><span> point2 </span><span style=color:#ed9366>=</span><span> point1</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// Copy trait allows this
</span><span>  </span><span style=color:#fa6e32>let</span><span> point3 </span><span style=color:#ed9366>=</span><span> point1</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// Clone trait allows this
</span><span>
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> point2)</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// Output: Point { x: 10, y: 20 }
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> point3)</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// Output: Point { x: 10, y: 20 }
</span><span>
</span><span>}
</span></code></pre><p>Here, the <code>#[derive(Debug, Clone, Copy)]</code> attribute implements both Debug, Clone, and Copy traits for the Point struct.<p><strong>Deriving <code>PartialEq</code> and <code>Eq</code></strong><p>The <code>PartialEq</code> trait is used to compare two values for equality, while <code>Eq</code> is a marker trait that indicates that the comparison is reflexive, symmetric, and transitive.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(PartialEq</span><span style=color:#61676ccc>,</span><span> Eq)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>Point </span><span>{
</span><span>  x</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>  y</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>i32</span><span>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>  </span><span style=color:#fa6e32>let</span><span> p1 </span><span style=color:#ed9366>=</span><span> Point { x</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>1</span><span style=color:#61676ccc>,</span><span> y</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>2 </span><span>}</span><span style=color:#61676ccc>;
</span><span>  </span><span style=color:#fa6e32>let</span><span> p2 </span><span style=color:#ed9366>=</span><span> Point { x</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>1</span><span style=color:#61676ccc>,</span><span> y</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>2 </span><span>}</span><span style=color:#61676ccc>;
</span><span>  </span><span style=color:#f07171>assert_eq!</span><span>(p1</span><span style=color:#61676ccc>,</span><span> p2)</span><span style=color:#61676ccc>; </span><span style=color:#abb0b6;font-style:italic>// This works because of PartialEq
</span><span>}
</span></code></pre><p>In this example, the <code>#[derive(PartialEq, Eq)]</code> attribute implements both <code>PartialEq</code> and <code>Eq</code> traits for the <code>Point</code> struct.<h2 id=differences-from-other-languages><a aria-label="Anchor link for: differences-from-other-languages" class=zola-anchor href=#differences-from-other-languages>Differences from Other Languages</a></h2><ul><li><strong>Automatic Implementation</strong>: Unlike some other languages where you might need to manually implement methods for traits like equality or cloning, Rust's <code>derive</code> attribute automates this process.<li><strong>Type Safety</strong>: Rust's type system ensures that only types that can logically support a trait are derived. For example, you can't derive <code>Copy</code> for a type that contains non-<code>Copy</code> fields.<li>Extensibility: While <code>derive</code> provides default implementations, you can still manually implement traits if you need more complex behavior.</ul><h2 id=conclusion><a aria-label="Anchor link for: conclusion" class=zola-anchor href=#conclusion>Conclusion</a></h2><p>The <code>derive</code> attribute in Rust is a powerful tool that simplifies the implementation of common traits, reducing boilerplate code and improving developer productivity. By leveraging <code>derive</code>, you can quickly add functionality to your custom data types while maintaining the flexibility to implement more complex behavior when needed.</section></article></main></div><div class=giscus></div><script async crossorigin issue-term=pathname label=Comment repo=xavier2code/blog src=https://utteranc.es/client.js theme=preferred-color-scheme></script></div><div class=right-content></div>